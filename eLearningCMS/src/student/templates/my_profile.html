{% extends "__student_base.html" %}
{% load staticfiles %}
{% load thumbnail %}

{% block active %}
  <!-- Breadcrumbs-->
  <ol class="breadcrumb">
    <li class="breadcrumb-item">
      <a href="#">Dashboard</a>
    </li>
    <li class="breadcrumb-item active">Profile</li>
  </ol>


  <div class="container">
      <h1>Edit Profile</h1>
      <hr>
    <form class="row" role="form" enctype="multipart/form-data" method="post">
        {% csrf_token %}
        <!-- left column -->
        <div class="col-md-3">
          <div class="text-center">
            <img id="profilePic" src="{% thumbnail userDetails.picture|default:'default_profile.png' 100x100 crop %}" class="rounded-circle" alt="avatar">
            <p>Upload Profile photo</p>
            
            <input type="file" onchange="readURL(this);" class="form-control" name="profile_pic">
          </div>
        </div>
        
        <!-- edit form column -->
        <div class="col-md-9 personal-info">
          <!--<div class="alert alert-info alert-dismissable">
            <a class="panel-close close" data-dismiss="alert">Ã—</a> 
            <i class="fa fa-warning"></i>
            This is an <strong>.alert</strong>. Use this to show important messages to the user.
          </div> -->
          <h3>Personal info</h3>
          
		  <form class="form-horizontal" role="form" method="post" action="" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="form-group">
              <label class="col-lg-3 control-label">Name:</label>
              <div class="col-lg-8">
                <input class="form-control" type="text" value="{{ authUserDetails.name }}" name="name">
              </div>
            </div>
			<div class="form-group">
              <label class="col-md-3 control-label">About Me:</label>
              <div class="col-md-8">
               {% if userDetails.bio|length > 0 %}
                <input class="form-control" type="text" style="height:50px;width:250px" value="{{ userDetails.bio }}" name="bio">
               {% else %}
                <input class="form-control" type="text" style="height:50px;width:250px" value="" name="bio">
               {% endif %}
             </div>
            </div>
            <div class="form-group">
              <label class="col-lg-3 control-label">Mobile:</label>
              <div class="col-lg-8">
               {% if userDetails.phone|length > 0 %}
                  <input class="form-control" type="text" value="{{ userDetails.phone }}" name="mobile" pattern="[789][0-9]{9}" title="Enter a valid 10 digit number">
               {% else %}
                  <input class="form-control" type="text" value="" name="mobile" pattern="[789][0-9]{9}" title="Enter a valid 10 digit number">
               {% endif %}
              </div>
            </div>
            <div class="form-group">
              <label class="col-lg-3 control-label">Email:</label>
              <div class="col-lg-8">
                <input class="form-control" type="email" value="{{ authUserDetails.email }}" name="email">
              </div>
            </div>
            <div class="form-group">
              <label class="col-md-3 control-label">Address:</label>
              <div class="col-md-8">
               {% if userDetails.address|length > 0 %}
                <input class="form-control" type="text" value="{{ userDetails.address }}" name="address">
               {% else %}
                <input class="form-control" type="text" value="" name="address">
               {% endif %}
             </div>
            </div>
			<div class="form-group">
              <label class="col-md-3 control-label">City:</label>
              <div class="col-md-8">
               {% if userDetails.city|length > 0 %}
                <input class="form-control" type="text" value="{{ userDetails.city }}" name="city">
               {% else %}
                <input class="form-control" type="text" value="" name="city">
               {% endif %}
             </div>
            </div>
			<div class="form-group">
              <label class="col-md-3 control-label">Country:</label>
              <div class="col-md-8">
               {% if userDetails.country|length > 0 %}
                <input class="form-control" type="text" value="{{ userDetails.country }}" name="country">
               {% else %}
                <input class="form-control" type="text" value="" name="country">
               {% endif %}
             </div>
            </div>
			<div class="form-group">
              <label class="col-md-3 control-label"><a href="{% url 'accounts:password-change' %}">Change Password</a></label>
            </div>
            <div class="form-group">
              <label class="col-md-3 control-label"></label>
              <div class="col-md-8">
                <input type="submit" class="btn btn-primary" value="Save Changes">
                <span></span>
                <input type="reset" class="btn btn-default" value="Cancel">
              </div>
            </div>
          </form>
        </div>
    </div>
  </div>
  <hr>

  <script>
      function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#profilePic')
                    .attr('src', e.target.result)
                    .width(100)
                    .height(100);
            };

            reader.readAsDataURL(input.files[0]);
        }
    }
  </script>

    
{% endblock active %}